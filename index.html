<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MOG Eye (PNG Mask)</title>

<style>
html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  background: black;
  overflow: hidden;
}

video, svg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

/* Smooth fade-in */
#eyeOffset {
  opacity: 0;
  transition: opacity 0.8s ease;
}
</style>
</head>

<body>

<!-- BACKGROUND VIDEO -->
<video id="bgVideo" autoplay muted playsinline>
  <source src="mog.mp4" type="video/mp4">
</video>

<svg viewBox="0 0 1920 1080">

  <defs>
    <!-- PNG MASK (mask.png) -->
    <mask id="eyeMask" maskUnits="userSpaceOnUse">
      <image
        href="mask.png"
        x="0"
        y="0"
        width="1920"
        height="1080"
        preserveAspectRatio="none"
      />
    </mask>
  </defs>

  <!-- EVERYTHING APPEARS TOGETHER -->
  <g id="eyeOffset">

    <!-- SCLERA (VISIBLE ONLY) -->
    <image
      href="White.png"
      x="0"
      y="0"
      width="1920"
      height="1080"
    />

    <!-- MASKED CONTENT -->
    <g mask="url(#eyeMask)">

      <!-- IRIS (MOVES) -->
      <g id="eyeMove">
        <image
          href="Iris.png"
          x="0"
          y="0"
          width="1920"
          height="1080"
        />
      </g>

      <!-- REFLECTIONS (STATIC, ON TOP, CLIPPED) -->
      <image
        href="reflections.png"
        x="-690"
        y="-487"
        width="3090"
        height="2390"
      />

    </g>

  </g>

</svg>

<script>
const eyeMove = document.getElementById("eyeMove");
const eyeOffset = document.getElementById("eyeOffset");
const video = document.getElementById("bgVideo");

let eyeActive = false;

// Pause video + fade eye in
video.addEventListener("timeupdate", () => {
  if (!eyeActive && video.currentTime >= 4.078) {
    video.pause();
    eyeOffset.style.opacity = "1";
    eyeActive = true;
  }
});

// Mouse-driven iris movement
document.addEventListener("mousemove", (e) => {
  if (!eyeActive) return;

  const x = (e.clientX / window.innerWidth - 0.5) * 120;
  const y = (e.clientY / window.innerHeight - 0.5) * 60;

  eyeMove.setAttribute(
    "transform",
    `translate(${x}, ${y})`
  );
});
</script>

</body>
</html>
